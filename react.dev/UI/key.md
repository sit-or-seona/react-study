# Describing the UI

## key로 목록의 항목 순서 유지하기

- 배열의 항목에는 고유하게 식별할 수 있는 문자열 또는 숫자인 key를 부여해야 함
- **map() 호출 내부의 JSX 요소에는 항상 key가 필요**

```
key가 없을 경우 발생하는 에러
Warning: Each child in a list should have a unique “key” prop.
```

- key의 역할

  - 각 컴포넌트가 어떤 배열 항목에 해당하는지 React에 알려주어 매칭할 수 있도록 함
  - 배열 항목이 이동, 삽입, 삭제되는 경우 중요
  - React가 DOM 트리를 올바르게 업데이트하는 걸 도움

<br>

## key를 얻을 수 있는 곳

- 즉석에서 key를 생성하는 대신 데이터에 포함시켜야 함
- 데이터 소스에 따라 다른 key 제공
  - 데이터베이스에서 가져는 경우: 고유한 데이터베이스 key/ID를 사용
  - 로컬에서 생성하는 데이터일 경우(ex. 메모 작성 앱의 메모): `crypto.randomUUID()` 또는 `uuid`와 같은 패키지 사용

<br>

## key 규칙

- 형제 간에 고유해야 함 (다른 배열의 JSX 노드에는 동일한 key 사용 가능)
- key가 변경되지 않아야 함

<br>

## React에 key가 필요한 이유

- 각 컴포넌트에 key를 설정해 위치나 데이터가 변경되더라도 React가 각 컴포넌트를 추적할 수 있도록 함
  - 배열의 JSX key는 폴더의 파일명과 같은 역할
  - 형제 항목 사이에서 특정 항목을 고유하게 식별
  - 재정렬로 인해 항목의 위치가 변경되어도 React는 key를 통해 그 항목을 식별 가능

## 유의사항

- 인덱스를 key로 사용하지 말 것
  - key를 지정하지 않으면, React는 인덱스를 key로 사용
  - 배열이 변경되었을 때 혼란 발생
- key={Math.random()}과 같이 즉석에서 key를 생성하지 말 것
  - 렌더링될 때마다 key가 일치하지 않아 매번 모든 컴포넌트와 DOM이 다시 생성
  - 속도 저하와 사용자 입력값 손실 문제 발생
- **key를 prop으로 받지 않음**
  - 컴포넌트에 ID가 필요한 경우 별도의 프로퍼티로 전달
  ```js
  <Profile key={id} userId={id} />
  ```
